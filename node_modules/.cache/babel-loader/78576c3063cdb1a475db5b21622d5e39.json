{"remainingRequest":"/media/santiago/projects/join-ui/node_modules/thread-loader/dist/cjs.js!/media/santiago/projects/join-ui/node_modules/babel-loader/lib/index.js!/media/santiago/projects/join-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/media/santiago/projects/join-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/media/santiago/projects/join-ui/packages/sku/src/SkuSpec.vue?vue&type=script&lang=js&","dependencies":[{"path":"/media/santiago/projects/join-ui/packages/sku/src/SkuSpec.vue","mtime":1570518414398},{"path":"/media/santiago/projects/join-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/santiago/projects/join-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/santiago/projects/join-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/santiago/projects/join-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/santiago/projects/join-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'SkuSpec',\n  props: {\n    // 是否显示json\n    isShowCode: {\n      type: Boolean,\n      default: false\n    },\n    value: {\n      // 规格\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      // 用来存储要添加的规格属性\n      addValues: []\n    };\n  },\n  watch: {\n    value: {\n      handler: function handler() {\n        this.$emit('update:model', this.value);\n      },\n      deep: true\n    }\n  },\n  methods: {\n    // 添加规格项目\n    addSpec: function addSpec() {\n      if (this.value.length < 5) {\n        this.value.push({\n          name: '',\n          value: []\n        });\n      }\n    },\n    // 删除规格项目\n    delSpec: function delSpec(index) {\n      this.value.splice(index, 1);\n    },\n    // 添加规格属性\n    addSpecTag: function addSpecTag(index) {\n      var str = this.addValues[index] || '';\n      if (!str.trim()) return; // 判空\n\n      str = str.trim();\n      var arr = str.split(/\\s+/); // 使用空格分割成数组\n\n      var newArr = this.value[index].value.concat(arr);\n      newArr = Array.from(new Set(newArr)); // 去重\n\n      this.$set(this.value[index], 'value', newArr);\n      this.clearAddValues(index);\n    },\n    // 删除规格属性\n    delSpecTag: function delSpecTag(index, num) {\n      this.value[index].value.splice(num, 1);\n    },\n    // 清空 addValues\n    clearAddValues: function clearAddValues(index) {\n      this.$set(this.addValues, index, '');\n    }\n  }\n};",{"version":3,"sources":["SkuSpec.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAFA;AAMA,IAAA,KAAA,EAAA;AAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,oBAAA;AAAA,eAAA,EAAA;AAAA;AAFA;AANA,GAFA;AAaA,EAAA,IAbA,kBAaA;AACA,WAAA;AACA;AACA,MAAA,SAAA,EAAA;AAFA,KAAA;AAIA,GAlBA;AAmBA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,OAAA,EAAA,mBAAA;AACA,aAAA,KAAA,CAAA,cAAA,EAAA,KAAA,KAAA;AACA,OAHA;AAIA,MAAA,IAAA,EAAA;AAJA;AADA,GAnBA;AA2BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,OAFA,qBAEA;AACA,UAAA,KAAA,KAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,KAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,EADA;AAEA,UAAA,KAAA,EAAA;AAFA,SAAA;AAIA;AACA,KATA;AAWA;AACA,IAAA,OAZA,mBAYA,KAZA,EAYA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KAdA;AAgBA;AACA,IAAA,UAjBA,sBAiBA,KAjBA,EAiBA;AACA,UAAA,GAAA,GAAA,KAAA,SAAA,CAAA,KAAA,KAAA,EAAA;AACA,UAAA,CAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAFA,CAEA;;AACA,MAAA,GAAA,GAAA,GAAA,CAAA,IAAA,EAAA;AACA,UAAA,GAAA,GAAA,GAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAJA,CAIA;;AAEA,UAAA,MAAA,GAAA,KAAA,KAAA,CAAA,KAAA,EAAA,KAAA,CAAA,MAAA,CAAA,GAAA,CAAA;AACA,MAAA,MAAA,GAAA,KAAA,CAAA,IAAA,CAAA,IAAA,GAAA,CAAA,MAAA,CAAA,CAAA,CAPA,CAOA;;AACA,WAAA,IAAA,CAAA,KAAA,KAAA,CAAA,KAAA,CAAA,EAAA,OAAA,EAAA,MAAA;AAEA,WAAA,cAAA,CAAA,KAAA;AACA,KA5BA;AA8BA;AACA,IAAA,UA/BA,sBA+BA,KA/BA,EA+BA,GA/BA,EA+BA;AACA,WAAA,KAAA,CAAA,KAAA,EAAA,KAAA,CAAA,MAAA,CAAA,GAAA,EAAA,CAAA;AACA,KAjCA;AAmCA;AACA,IAAA,cApCA,0BAoCA,KApCA,EAoCA;AACA,WAAA,IAAA,CAAA,KAAA,SAAA,EAAA,KAAA,EAAA,EAAA;AACA;AAtCA;AA3BA,CAAA","sourcesContent":["<template>\n  <div class=\"jui-sku-container\">\n    <!-- 规格设置 -->\n    <div class=\"specification\">\n      <ul class=\"spec-list\">\n        <li v-for=\"(item, index) in value\" :key=\"index\" class=\"item\">\n          <div class=\"name\">\n            <el-input v-model=\"item.name\" size=\"small\" placeholder=\"输入产品规格名称\"></el-input>\n            <i class=\"icon el-icon-circle-close\" @click=\"delSpec(index)\"></i>\n          </div>\n          <div class=\"values\">\n            <span v-for=\"(tag, num) in item.value\" :key=\"tag\" class=\"el-tag\">\n              <span class=\"el-select__tags-text\">{{ tag }}</span>\n              <i class=\"el-tag__close el-icon-close\" @click=\"delSpecTag(index, num)\"></i>\n            </span>\n            <div class=\"add-attr\">\n              <el-input v-model=\"addValues[index]\" size=\"small\" placeholder=\"多个产品属性以空格隔开\" icon=\"plus\" @click=\"addSpecTag(index)\" @keyup.native.enter=\"addSpecTag(index)\"></el-input>\n            </div>\n          </div>\n        </li>\n        <li class=\"item\">\n          <div class=\"add-spec\">\n            <el-button plain size=\"small\" type=\"info\" :disabled=\"value.length >= 5\" @click=\"addSpec\">添加规格项目</el-button>\n          </div>\n        </li>\n      </ul>\n    </div>\n    <div v-if=\"isShowCode\" class=\"example\">\n      <textarea class=\"code-area\" :value=\"JSON.stringify(value)\"></textarea>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'SkuSpec',\n  props: {\n    // 是否显示json\n    isShowCode: {\n      type: Boolean,\n      default: false\n    },\n    value: { // 规格\n      type: Array,\n      default: function() { return [] }\n    }\n  },\n  data() {\n    return {\n      // 用来存储要添加的规格属性\n      addValues: []\n    }\n  },\n  watch: {\n    value: {\n      handler: function() {\n        this.$emit('update:model', this.value)\n      },\n      deep: true\n    }\n  },\n  methods: {\n    // 添加规格项目\n    addSpec() {\n      if (this.value.length < 5) {\n        this.value.push({\n          name: '',\n          value: []\n        })\n      }\n    },\n\n    // 删除规格项目\n    delSpec(index) {\n      this.value.splice(index, 1)\n    },\n\n    // 添加规格属性\n    addSpecTag(index) {\n      let str = this.addValues[index] || ''\n      if (!str.trim()) return // 判空\n      str = str.trim()\n      const arr = str.split(/\\s+/) // 使用空格分割成数组\n\n      let newArr = this.value[index].value.concat(arr)\n      newArr = Array.from(new Set(newArr)) // 去重\n      this.$set(this.value[index], 'value', newArr)\n\n      this.clearAddValues(index)\n    },\n\n    // 删除规格属性\n    delSpecTag(index, num) {\n      this.value[index].value.splice(num, 1)\n    },\n\n    // 清空 addValues\n    clearAddValues(index) {\n      this.$set(this.addValues, index, '')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.jui-sku-container {\n  .example {\n    .code-area {\n      width: 100%;\n      height: 300px;\n      padding: 20px;\n      line-height: 1.6;\n    }\n  }\n  .specification {\n    list-style: none;\n    vertical-align: top;\n    .spec-list {\n      list-style: none;\n      background-color: #fff;\n      border: 1px solid #d8d8d8;\n      padding: 10px;\n      .item {\n        margin-top: 5px;\n        &:first-child {\n          margin-top: 0;\n        }\n        .name {\n          background: #f3f6fb;\n          padding: 7px 10px;\n          text-align: right;\n          overflow: hidden;\n          .el-input {\n            float: left;\n            width: 150px;\n          }\n          .icon {\n            display: none;\n            color: #929292;\n            cursor: pointer;\n            &:hover {\n              color: #880000;\n            }\n          }\n          &:hover {\n            .icon {\n              display: inline-block;\n            }\n          }\n        }\n        .values {\n          padding-bottom: 10px;\n          .el-tag {\n            margin: 8px 0 0 8px;\n          }\n          .add-attr {\n            display: inline-block;\n            vertical-align: top;\n            margin-top: 4px;\n            .el-input {\n              width: 200px;\n              margin: 2px 0 0 4px;\n            }\n          }\n        }\n      }\n      .add-spec {\n        font-size: 13px;\n      }\n    }\n  }\n}\n</style>\n"],"sourceRoot":"packages/sku/src"}]}