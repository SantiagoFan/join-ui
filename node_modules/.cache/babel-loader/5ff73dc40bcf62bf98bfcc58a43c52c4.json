{"remainingRequest":"/media/santiago/projects/join-ui/node_modules/babel-loader/lib/index.js!/media/santiago/projects/join-ui/node_modules/babel-loader/lib/index.js!/media/santiago/projects/join-ui/node_modules/eslint-loader/index.js??ref--13-0!/media/santiago/projects/join-ui/packages/utils/vuelist.js","dependencies":[{"path":"/media/santiago/projects/join-ui/packages/utils/vuelist.js","mtime":1570522343568},{"path":"/media/santiago/projects/join-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/media/santiago/projects/join-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/santiago/projects/join-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/media/santiago/projects/join-ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["// vue 分页混合 手机版\nexport default {\n  data: {\n    //------分页查询-----\n    list: [],\n    isLoading: false,\n    //拉取状态\n    isNodata: false,\n    // 是否无数据\n    queryParams: {\n      page: 1,\n      limit: 10\n    },\n    queryUrl: '' //查询api 地址\n    //------分页查询-----\n\n  },\n  created: function created() {\n    window.addEventListener('scroll', this.onScroll);\n  },\n  methods: {\n    //下拉刷新\n    onScroll: function onScroll() {\n      //可滚动容器的高度\n      var innerHeight = document.querySelector('#app').clientHeight; //屏幕尺寸高度\n\n      var outerHeight = document.documentElement.clientHeight; //可滚动容器超出当前窗口显示范围的高度\n\n      var scrollTop = document.body.scrollTop | document.documentElement.scrollTop;\n\n      if (innerHeight - outerHeight - scrollTop <= 100) {\n        this.LoadMore();\n      }\n    },\n    // 拉取数据\n    LoadData: function LoadData() {\n      var _this = this; // var loading = weui.loading('加载中....');\n\n\n      this.isLoading = true;\n      axios.post(this.queryUrl, this.queryParams).then(function (res) {\n        if (res.data.code != 20000) {// weui.topTips(res.data.msg);\n        } else {\n          if (res.data.data.length < _this.queryParams.limit) _this.isNodata = true; //加载数据少于分页数则表示已经加载完\n\n          _this.list = _this.list.concat(res.data.data);\n        } // loading.hide();\n\n\n        _this.isLoading = false;\n      }).catch(function (res) {\n        _this.isLoading = false; // loading.hide();\n        // weui.topTips('网络异常，请稍后重试');\n      });\n    },\n    // 下一页\n    LoadMore: function LoadMore() {\n      if (this.isNodata || this.isLoading) return; //无数据或者加载中不进行加载\n\n      this.queryParams.page += 1;\n      this.LoadData();\n    },\n    // 重新加载\n    Reload: function Reload() {\n      this.isNodata = false;\n      this.isLoading = false;\n      this.list = [];\n      this.queryParams.page = 1;\n      this.LoadData();\n    }\n  }\n};",{"version":3,"sources":["/media/santiago/projects/join-ui/packages/utils/vuelist.js"],"names":["data","list","isLoading","isNodata","queryParams","page","limit","queryUrl","created","window","methods","onScroll","innerHeight","document","outerHeight","scrollTop","LoadData","axios","res","LoadMore","Reload"],"mappings":"AAAA;AACA,eAAgB;AACZA,EAAAA,IAAI,EAAE;AACF;AACAC,IAAAA,IAAI,EAFF,EAAA;AAGFC,IAAAA,SAAS,EAHP,KAAA;AAGc;AAChBC,IAAAA,QAAQ,EAJN,KAAA;AAIa;AACfC,IAAAA,WAAW,EAAE;AACTC,MAAAA,IAAI,EADK,CAAA;AAETC,MAAAA,KAAK,EAAC;AAFG,KALX;AASFC,IAAAA,QAAQ,EATN,EAAA,CASS;AACX;;AAVE,GADM;AAaZC,EAAAA,OAbY,EAAA,SAAA,OAAA,GAaF;AACNC,IAAAA,MAAM,CAANA,gBAAAA,CAAAA,QAAAA,EAAkC,KAAlCA,QAAAA;AAdQ,GAAA;AAgBZC,EAAAA,OAAO,EAAC;AACJ;AACAC,IAAAA,QAFI,EAAA,SAAA,QAAA,GAEO;AACP;AACA,UAAIC,WAAW,GAAGC,QAAQ,CAARA,aAAAA,CAAAA,MAAAA,EAFX,YAEP,CAFO,CAGP;;AACA,UAAIC,WAAW,GAAGD,QAAQ,CAARA,eAAAA,CAJX,YAIP,CAJO,CAKP;;AACA,UAAIE,SAAS,GAAIF,QAAQ,CAARA,IAAAA,CAAAA,SAAAA,GAA0BA,QAAQ,CAARA,eAAAA,CAA3C,SAAA;;AACA,UAAKD,WAAW,GAAXA,WAAAA,GAAD,SAACA,IAAL,GAAA,EAAiD;AAC7C,aAAA,QAAA;AACH;AAXD,KAAA;AAaJ;AACAI,IAAAA,QAdI,EAAA,SAAA,QAAA,GAcM;AAAA,UAAA,KAAA,GAAA,IAAA,CAAA,CACN;;;AACA,WAAA,SAAA,GAAA,IAAA;AACAC,MAAAA,KAAK,CAALA,IAAAA,CAAW,KAAXA,QAAAA,EAA0B,KAA1BA,WAAAA,EAAAA,IAAAA,CAAiD,UAAA,GAAA,EAAK;AAClD,YAAGC,GAAG,CAAHA,IAAAA,CAAAA,IAAAA,IAAH,KAAA,EAAwB,CACpB;AADJ,SAAA,MAGK;AACD,cAAGA,GAAG,CAAHA,IAAAA,CAAAA,IAAAA,CAAAA,MAAAA,GAAqB,KAAI,CAAJ,WAAA,CAAxB,KAAA,EAAgD,KAAI,CAAJ,QAAA,GAD/C,IAC+C,CAD/C,CACqE;;AACtE,UAAA,KAAI,CAAJ,IAAA,GAAY,KAAI,CAAJ,IAAA,CAAA,MAAA,CAAiBA,GAAG,CAAHA,IAAAA,CAA7B,IAAY,CAAZ;AAN8C,SAAA,CAQlD;;;AACA,QAAA,KAAI,CAAJ,SAAA,GAAA,KAAA;AATJD,OAAAA,EAAAA,KAAAA,CAUS,UAAA,GAAA,EAAK;AACV,QAAA,KAAI,CAAJ,SAAA,GADU,KACV,CADU,CAEV;AACA;AAbJA,OAAAA;AAjBA,KAAA;AAiCJ;AACAE,IAAAA,QAlCI,EAAA,SAAA,QAAA,GAkCM;AACN,UAAG,KAAA,QAAA,IAAe,KAAlB,SAAA,EADM,OAAA,CACkC;;AACxC,WAAA,WAAA,CAAA,IAAA,IAAA,CAAA;AACA,WAAA,QAAA;AArCA,KAAA;AAuCJ;AACAC,IAAAA,MAxCI,EAAA,SAAA,MAAA,GAwCI;AACJ,WAAA,QAAA,GAAA,KAAA;AACA,WAAA,SAAA,GAAA,KAAA;AACA,WAAA,IAAA,GAAA,EAAA;AACA,WAAA,WAAA,CAAA,IAAA,GAAA,CAAA;AACA,WAAA,QAAA;AACH;AA9CG;AAhBI,CAAhB","sourcesContent":["// vue 分页混合 手机版\nexport default  {\n    data: {\n        //------分页查询-----\n        list:[],\n        isLoading:false,//拉取状态\n        isNodata:false,// 是否无数据\n        queryParams: {\n            page: 1,\n            limit:10,\n        },\n        queryUrl:''//查询api 地址\n        //------分页查询-----\n    },\n    created() {\n        window.addEventListener('scroll', this.onScroll);\n    },\n    methods:{\n        //下拉刷新\n        onScroll() {\n            //可滚动容器的高度\n            let innerHeight = document.querySelector('#app').clientHeight;\n            //屏幕尺寸高度\n            let outerHeight = document.documentElement.clientHeight;\n            //可滚动容器超出当前窗口显示范围的高度\n            let scrollTop =  document.body.scrollTop | document.documentElement.scrollTop;\n            if ((innerHeight-outerHeight - scrollTop) <=100) {\n                this.LoadMore();\n            }\n        },\n        // 拉取数据\n        LoadData(){\n            // var loading = weui.loading('加载中....');\n            this.isLoading =true;\n            axios.post(this.queryUrl, this.queryParams).then(res=>{\n                if(res.data.code!=20000){\n                    // weui.topTips(res.data.msg);\n                }\n                else {\n                    if(res.data.data.length<this.queryParams.limit) this.isNodata = true; //加载数据少于分页数则表示已经加载完\n                    this.list = this.list.concat(res.data.data);\n                }\n                // loading.hide();\n                this.isLoading =false;\n            }).catch(res=>{\n                this.isLoading =false;\n                // loading.hide();\n                // weui.topTips('网络异常，请稍后重试');\n            })\n        },\n        // 下一页\n        LoadMore(){\n            if(this.isNodata||this.isLoading)return;//无数据或者加载中不进行加载\n            this.queryParams.page += 1;\n            this.LoadData();\n        },\n        // 重新加载\n        Reload(){\n            this.isNodata = false;\n            this.isLoading= false;\n            this.list=[];\n            this.queryParams.page = 1;\n            this.LoadData();\n        }\n    }\n}"]}]}