module.exports=function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=13)}({0:function(t,e,i){"use strict";function s(t,e,i,s,a,n,r,o){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),n&&(d._scopeId="data-v-"+n),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=l):a&&(l=o?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(t,e){return l.call(e),c(t,e)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,l):[l]}return{exports:t,options:d}}i.d(e,"a",(function(){return s}))},13:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"j-position-selector"},[i("el-card",{attrs:{shadow:"hover"}},[i("div",{staticStyle:{padding:"0px 10px"},attrs:{slot:"header"},slot:"header"},[i("span",[i("i",{staticClass:"el-icon-map-location"}),t._v(" 地址坐标")]),i("el-button",{staticStyle:{float:"right",padding:"10px 0"},attrs:{type:"text"},on:{click:t.showMap}},[t._v("选择地址")])],1),i("div",{staticClass:"item"},[i("el-row",[i("span",[t._v("地址："+t._s(t.address?t.address:"未设置"))])]),i("el-row",{staticClass:"sub-info"},[i("el-col",{attrs:{span:12}},[t._v("经度："+t._s(t.lng))]),i("el-col",{attrs:{span:12}},[t._v("纬度："+t._s(t.lat))])],1)],1)]),i("el-dialog",{attrs:{"custom-class":"j-position-selector-dialog",visible:t.dialogVisible,title:"选择地图",width:"1000px","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"map"},[i("div",{ref:"container",staticStyle:{width:"100%",height:"500px"},attrs:{id:"map"}}),i("div",{staticClass:"address-search"},[i("el-input",{attrs:{placeholder:"请输入地址来直接查找相关位置"},on:{input:t.getSuggestions},model:{value:t.detail.address,callback:function(e){t.$set(t.detail,"address",e)},expression:"detail.address"}})],1),t.nearPois.length>0?i("div",{staticClass:"address-list"},t._l(t.nearPois,(function(e,s){return i("div",{key:s,staticClass:"items",on:{click:function(i){return t.selectAddress(e)}}},[i("div",{staticClass:"address-title"},[t._v(t._s(e.title))]),i("div",{staticClass:"address-info"},[t._v(t._s(e.address))])])})),0):t._e()]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{disabled:"",placeholder:"坐标经度"},model:{value:t.center.lng,callback:function(e){t.$set(t.center,"lng",e)},expression:"center.lng"}},[i("template",{slot:"prepend"},[t._v("经度")])],2)],1),i("el-col",{attrs:{span:6}},[i("el-input",{attrs:{disabled:"",placeholder:"坐标纬度"},model:{value:t.center.lat,callback:function(e){t.$set(t.center,"lat",e)},expression:"center.lat"}},[i("template",{slot:"prepend"},[t._v("纬度")])],2)],1),i("el-col",{attrs:{span:12}},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.Select}},[t._v("确 定")])],1)],1)],1)])],1)};s._withStripped=!0;var a={name:"JPositionSelector",props:{mapKey:{type:String,default:""},lng:{type:Number,default:116.397502},lat:{type:Number,default:39.908802},adcode:{type:String,default:""},province:{type:String,default:""},city:{type:String,default:""},district:{type:String,default:""},address:{type:String,default:""}},data:()=>({dialogVisible:!1,TMap:null,map:null,marker:null,center:{height:0,lng:null,lat:null},detail:{adcode:"",province:"",city:"",district:"",address:""},searchService:null,suggestService:null,geocoderService:null,nearPois:[]}),methods:{showMap(){this.dialogVisible=!0,this.init()},init(){this.map||this.initMap().then(t=>{this.center=new t.LatLng(this.lat||39.908802,this.lng||116.397502),this.TMap=t,this.map=new t.Map("map",{center:this.center,zoom:15,viewMode:"2D"}),this.map.on("click",this.mapClick),this.initMaker(this.center),this.suggestService=new t.service.Suggestion({pageSize:10,regionFix:!1}),this.geocoderService=new t.service.Geocoder})},initMap(){return new Promise(t=>{if("undefined"!=typeof TMap)return t(TMap),!0;window.onMapCallback=function(){t(TMap)};let e="https://map.qq.com/api/gljs?v=1.exp&libraries=tools,service&key="+this.mapKey+"&callback=onMapCallback",i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",e),document.body.appendChild(i)})},initMaker(t){this.marker=new this.TMap.MultiMarker({map:this.map,styles:{marker:new this.TMap.MarkerStyle({width:20,height:30,anchor:{x:10,y:30}})},geometries:[{position:t,id:"centerMarker"}]})},moveCenter(){var t=this.marker.getGeometryById("centerMarker");Object.assign(t,{position:this.center}),this.marker.updateGeometries([t]),this.nearPois=[]},mapClick(t){this.center=t.latLng,this.geocoderService.getAddress({location:t.latLng}).then(t=>{this.detail.address=t.result.address,this.detail.province=t.result.ad_info.province,this.detail.city=t.result.ad_info.city,this.detail.district=t.result.ad_info.district,this.detail.adcode=t.result.ad_info.adcode}),this.moveCenter()},getSuggestions(){this.detail.address?this.suggestService.getSuggestions({keyword:this.detail.address,location:this.map.getCenter()}).then(t=>{this.nearPois=t.data}):this.nearPois=[]},selectAddress(t){this.center=t.location,this.moveCenter(),this.map.setCenter(t.location),this.detail.address=t.address,this.detail.province=t.province,this.detail.city=t.city,this.detail.district=t.district,this.detail.adcode=t.adcode},Select(){this.$emit("update:lng",this.center.lng),this.$emit("update:lat",this.center.lat),this.$emit("update:province",this.detail.province),this.$emit("update:city",this.detail.city),this.$emit("update:district",this.detail.district),this.$emit("update:adcode",this.detail.adcode),this.$emit("update:address",this.detail.address),this.$emit("change",{...this.detail,...this.center}),this.dialogVisible=!1}}},n=i(0),r=Object(n.a)(a,s,[],!1,null,null,null);r.options.__file="packages/position-selector/PositionSelector.vue";var o=r.exports;o.install=function(t){t.component(o.name,o)};e.default=o;"undefined"!=typeof window&&window.Vue&&window.Vue.component(o.name,o)}});